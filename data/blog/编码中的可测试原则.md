---
tags: [编码, 单元测试]
date: 2018-07-21
title: 编码中的可测试原则
---

## 引子
在代码编码过程中，如果没有提前考虑测试的因素，那么写完代码之后，写单元测试代码，会事倍功半。
这里总结一些代码可测试性的原则，在写代码之前理解这些原则，会事半功倍。

## 原则
### 依赖解耦原则
#### 类之间的引用，通过Interface方式，测试时候方便提供测试实现
### 运行环境隔离原则
#### 不依赖环境变量，依赖系统属性
环境变量通过```System.genenv(..)```获取，这种方式无法通过测试注入
如果需要，可以将环境变量，转为系统属性。典型的做法是在启动脚本中实现：
```
java -jar -DproA=${env_a} ...
```
```